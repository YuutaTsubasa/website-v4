import{s as be,p as ie,i as N,f as m,k as $e,q as ve,e as b,t as j,a as B,c as $,b as w,d as D,g as H,r as d,v as ke,h as f,j as re,w as ye,n as Q,x as _e}from"../chunks/scheduler.Cq-2pPUB.js";import{S as Pe,i as Ee,a as R,c as ge,t as T,g as me,b as W,d as X,m as Y,e as Z}from"../chunks/index.DPwGWccd.js";import{e as fe}from"../chunks/each.D6YF6ztN.js";import{T as we,E as de}from"../chunks/Tag.lIjMCAKE.js";import{l as Ce,P as Ie}from"../chunks/PostCard.Clk5WNC8.js";import{p as Te}from"../chunks/stores.DOuSLOC1.js";function ue(l,e,s){const t=l.slice();return t[11]=e[s],t}function je(l){let e,s,t,r,o=l[5]?`標籤篩選：${l[5]}`:"內容總覽",p,k,n,h,_,I,y,F,g,S,v,L,z,x,G,ee,te,U;_=new we({props:{isAll:!0,tag:null,selectedTag:l[5]}});let V=fe(l[3]),i=[];for(let a=0;a<V.length;a+=1)i[a]=pe(ue(l,V,a));const he=a=>R(i[a],1,1,()=>{i[a]=null});function ae(a,c){return a[7]?Ue:Se}let J=ae(l),P=J(l);function ne(a,c){return a[6]?qe:Ve}let K=ne(l),E=K(l);return{c(){e=b("section"),s=b("section"),t=b("div"),r=b("h2"),p=j(o),k=B(),n=b("div"),h=b("div"),W(_.$$.fragment),I=B(),y=b("div");for(let a=0;a<i.length;a+=1)i[a].c();F=B(),g=b("div"),P.c(),S=B(),v=b("p"),L=j("第 "),z=j(l[0]),x=j(" 頁 / 共 "),G=j(l[1]),ee=j(" 頁"),te=B(),E.c(),this.h()},l(a){e=$(a,"SECTION",{class:!0});var c=w(e);s=$(c,"SECTION",{class:!0,style:!0});var C=w(s);t=$(C,"DIV",{class:!0});var u=w(t);r=$(u,"H2",{class:!0});var O=w(r);p=D(O,o),O.forEach(m),u.forEach(m),C.forEach(m),k=H(c),n=$(c,"DIV",{class:!0});var q=w(n);h=$(q,"DIV",{class:!0});var oe=w(h);X(_.$$.fragment,oe),oe.forEach(m),I=H(q),y=$(q,"DIV",{class:!0});var ce=w(y);for(let se=0;se<i.length;se+=1)i[se].l(ce);ce.forEach(m),F=H(q),g=$(q,"DIV",{class:!0});var A=w(g);P.l(A),S=H(A),v=$(A,"P",{class:!0});var M=w(v);L=D(M,"第 "),z=D(M,l[0]),x=D(M," 頁 / 共 "),G=D(M,l[1]),ee=D(M," 頁"),M.forEach(m),te=H(A),E.l(A),A.forEach(m),q.forEach(m),c.forEach(m),this.h()},h(){d(r,"class","flex-1 text-6xl font-bold text-white"),d(t,"class","flex flex-col items-center justify-center"),d(s,"class","relative bg-cover bg-center bg-no-repeat h-96 w-screen flex items-center justify-center mb-12"),ke(s,"background-image","url('/images/background.webp')"),d(h,"class","flex flex-wrap mb-6 px-4 gap-2"),d(y,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"),d(v,"class","font-bold"),d(g,"class","flex justify-center gap-16 mt-6"),d(n,"class","max-w-7xl mx-auto"),d(e,"class","pb-12 fade-in-bg")},m(a,c){N(a,e,c),f(e,s),f(s,t),f(t,r),f(r,p),f(e,k),f(e,n),f(n,h),Y(_,h,null),f(n,I),f(n,y);for(let C=0;C<i.length;C+=1)i[C]&&i[C].m(y,null);f(n,F),f(n,g),P.m(g,null),f(g,S),f(g,v),f(v,L),f(v,z),f(v,x),f(v,G),f(v,ee),f(g,te),E.m(g,null),U=!0},p(a,c){(!U||c&32)&&o!==(o=a[5]?`標籤篩選：${a[5]}`:"內容總覽")&&re(p,o);const C={};if(c&32&&(C.selectedTag=a[5]),_.$set(C),c&40){V=fe(a[3]);let u;for(u=0;u<V.length;u+=1){const O=ue(a,V,u);i[u]?(i[u].p(O,c),T(i[u],1)):(i[u]=pe(O),i[u].c(),T(i[u],1),i[u].m(y,null))}for(me(),u=V.length;u<i.length;u+=1)he(u);ge()}J===(J=ae(a))&&P?P.p(a,c):(P.d(1),P=J(a),P&&(P.c(),P.m(g,S))),(!U||c&1)&&re(z,a[0]),(!U||c&2)&&re(G,a[1]),K===(K=ne(a))&&E?E.p(a,c):(E.d(1),E=K(a),E&&(E.c(),E.m(g,null)))},i(a){if(!U){T(_.$$.fragment,a);for(let c=0;c<V.length;c+=1)T(i[c]);U=!0}},o(a){R(_.$$.fragment,a),i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)R(i[c]);U=!1},d(a){a&&m(e),Z(_),ye(i,a),P.d(),E.d()}}}function De(l){let e,s;return e=new de({props:{message:"暫無內容"}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,r){Y(e,t,r),s=!0},p:Q,i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function Re(l){let e,s;return e=new de({props:{message:"載入中..."}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,r){Y(e,t,r),s=!0},p:Q,i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function pe(l){let e,s;return e=new Ie({props:{post:l[11],selectedTag:l[5]}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,r){Y(e,t,r),s=!0},p(t,r){const o={};r&8&&(o.post=t[11]),r&32&&(o.selectedTag=t[5]),e.$set(o)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function Se(l){let e,s,t;return{c(){e=b("a"),s=j("上一頁"),this.h()},l(r){e=$(r,"A",{href:!0,class:!0});var o=w(e);s=D(o,"上一頁"),o.forEach(m),this.h()},h(){d(e,"href",t=`/posts?page=${l[0]-1}${l[5]?`&tag=${encodeURIComponent(l[5])}`:""}`),d(e,"class","text-blue-500 font-bold")},m(r,o){N(r,e,o),f(e,s)},p(r,o){o&33&&t!==(t=`/posts?page=${r[0]-1}${r[5]?`&tag=${encodeURIComponent(r[5])}`:""}`)&&d(e,"href",t)},d(r){r&&m(e)}}}function Ue(l){let e,s="上一頁";return{c(){e=b("p"),e.textContent=s,this.h()},l(t){e=$(t,"P",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-19vgmjs"&&(e.textContent=s),this.h()},h(){d(e,"class","text-gray-400")},m(t,r){N(t,e,r)},p:Q,d(t){t&&m(e)}}}function Ve(l){let e,s,t;return{c(){e=b("a"),s=j("下一頁"),this.h()},l(r){e=$(r,"A",{href:!0,class:!0});var o=w(e);s=D(o,"下一頁"),o.forEach(m),this.h()},h(){d(e,"href",t=`/posts?page=${l[0]+1}${l[5]?`&tag=${encodeURIComponent(l[5])}`:""}`),d(e,"class","text-blue-500 font-bold")},m(r,o){N(r,e,o),f(e,s)},p(r,o){o&33&&t!==(t=`/posts?page=${r[0]+1}${r[5]?`&tag=${encodeURIComponent(r[5])}`:""}`)&&d(e,"href",t)},d(r){r&&m(e)}}}function qe(l){let e,s="下一頁";return{c(){e=b("p"),e.textContent=s,this.h()},l(t){e=$(t,"P",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-1fa0y9v"&&(e.textContent=s),this.h()},h(){d(e,"class","text-gray-400")},m(t,r){N(t,e,r)},p:Q,d(t){t&&m(e)}}}function Ae(l){let e,s,t,r;const o=[Re,De,je],p=[];function k(n,h){return n[4]?0:n[2].length===0?1:2}return e=k(l),s=p[e]=o[e](l),{c(){s.c(),t=ie()},l(n){s.l(n),t=ie()},m(n,h){p[e].m(n,h),N(n,t,h),r=!0},p(n,[h]){let _=e;e=k(n),e===_?p[e].p(n,h):(me(),R(p[_],1,1,()=>{p[_]=null}),ge(),s=p[e],s?s.p(n,h):(s=p[e]=o[e](n),s.c()),T(s,1),s.m(t.parentNode,t))},i(n){r||(T(s),r=!0)},o(n){R(s),r=!1},d(n){n&&m(t),p[e].d(n)}}}const le=12;function Me(l,e,s){let t,r,o,p;$e(l,Te,g=>s(8,p=g));let k=[],n=[],h=!0,_=null,I=1,y=1;ve(async()=>{window.scrollTo(0,0),s(2,k=await Ce()),s(5,_=t.get("tag")||null),s(0,I=(t.has("page")?parseInt(t.get("page")):1)??1),F(),s(4,h=!1)});function F(){const g=_?k.filter(L=>L.tags.includes(_)):k;s(1,y=Math.ceil(g.length/le));const S=(I-1)*le,v=S+le;s(3,n=g.slice(S,v))}return l.$$.update=()=>{l.$$.dirty&256&&(t=new URLSearchParams(p.url.search)),l.$$.dirty&1&&s(7,r=I<=1),l.$$.dirty&3&&s(6,o=I>=y)},[I,y,k,n,h,_,o,r,p]}class ze extends Pe{constructor(e){super(),Ee(this,e,Me,Ae,be,{})}}export{ze as component};
