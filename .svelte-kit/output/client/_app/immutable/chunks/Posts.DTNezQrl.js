import{s as be,o as ve,n as Q}from"./scheduler.Cz8qcNk9.js";import{S as ke,i as $e,e as ie,f as q,g as de,a as V,h as ge,t as T,j as m,k as b,l as j,s as H,c as W,n as v,o as C,p as D,q as L,b as X,r as _,u as ye,v as f,m as Y,w as le,d as Z,x as Pe,y as pe}from"./index.CVhQGuSt.js";import{e as fe}from"./each.D6YF6ztN.js";import{p as re,T as Ee,E as me}from"./Tag.WXGIjayf.js";import{l as Ce,P as we}from"./PostCard.D_fHBuFr.js";function ue(a,e,s){const t=a.slice();return t[11]=e[s],t}function Ie(a){let e,s,t,l,o=a[5]?`標籤篩選：${a[5]}`:"內容總覽",d,$,n,h,p,I,y,F,u,R,k,O,z,x,G,ee,te,S;p=new Ee({props:{isAll:!0,tag:null,selectedTag:a[5]}});let U=fe(a[3]),i=[];for(let r=0;r<U.length;r+=1)i[r]=_e(ue(a,U,r));const he=r=>V(i[r],1,1,()=>{i[r]=null});function ae(r,c){return r[7]?Ve:De}let J=ae(a),P=J(a);function ne(r,c){return r[6]?Se:Re}let K=ne(a),E=K(a);return{c(){e=b("section"),s=b("section"),t=b("div"),l=b("h2"),d=j(o),$=H(),n=b("div"),h=b("div"),W(p.$$.fragment),I=H(),y=b("div");for(let r=0;r<i.length;r+=1)i[r].c();F=H(),u=b("div"),P.c(),R=H(),k=b("p"),O=j("第 "),z=j(a[0]),x=j(" 頁 / 共 "),G=j(a[1]),ee=j(" 頁"),te=H(),E.c(),this.h()},l(r){e=v(r,"SECTION",{class:!0});var c=C(e);s=v(c,"SECTION",{class:!0,style:!0});var w=C(s);t=v(w,"DIV",{class:!0});var g=C(t);l=v(g,"H2",{class:!0});var B=C(l);d=D(B,o),B.forEach(m),g.forEach(m),w.forEach(m),$=L(c),n=v(c,"DIV",{class:!0});var A=C(n);h=v(A,"DIV",{class:!0});var oe=C(h);X(p.$$.fragment,oe),oe.forEach(m),I=L(A),y=v(A,"DIV",{class:!0});var ce=C(y);for(let se=0;se<i.length;se+=1)i[se].l(ce);ce.forEach(m),F=L(A),u=v(A,"DIV",{class:!0});var M=C(u);P.l(M),R=L(M),k=v(M,"P",{class:!0});var N=C(k);O=D(N,"第 "),z=D(N,a[0]),x=D(N," 頁 / 共 "),G=D(N,a[1]),ee=D(N," 頁"),N.forEach(m),te=L(M),E.l(M),M.forEach(m),A.forEach(m),c.forEach(m),this.h()},h(){_(l,"class","flex-1 text-6xl font-bold text-white"),_(t,"class","flex flex-col items-center justify-center"),_(s,"class","relative bg-cover bg-center bg-no-repeat h-96 w-screen flex items-center justify-center mb-12"),ye(s,"background-image","url('/images/background.webp')"),_(h,"class","flex flex-wrap mb-6 px-4 gap-2"),_(y,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"),_(k,"class","font-bold"),_(u,"class","flex justify-center gap-16 mt-6"),_(n,"class","max-w-7xl mx-auto"),_(e,"class","pb-12 fade-in-bg")},m(r,c){q(r,e,c),f(e,s),f(s,t),f(t,l),f(l,d),f(e,$),f(e,n),f(n,h),Y(p,h,null),f(n,I),f(n,y);for(let w=0;w<i.length;w+=1)i[w]&&i[w].m(y,null);f(n,F),f(n,u),P.m(u,null),f(u,R),f(u,k),f(k,O),f(k,z),f(k,x),f(k,G),f(k,ee),f(u,te),E.m(u,null),S=!0},p(r,c){(!S||c&32)&&o!==(o=r[5]?`標籤篩選：${r[5]}`:"內容總覽")&&le(d,o);const w={};if(c&32&&(w.selectedTag=r[5]),p.$set(w),c&40){U=fe(r[3]);let g;for(g=0;g<U.length;g+=1){const B=ue(r,U,g);i[g]?(i[g].p(B,c),T(i[g],1)):(i[g]=_e(B),i[g].c(),T(i[g],1),i[g].m(y,null))}for(de(),g=U.length;g<i.length;g+=1)he(g);ge()}J===(J=ae(r))&&P?P.p(r,c):(P.d(1),P=J(r),P&&(P.c(),P.m(u,R))),(!S||c&1)&&le(z,r[0]),(!S||c&2)&&le(G,r[1]),K===(K=ne(r))&&E?E.p(r,c):(E.d(1),E=K(r),E&&(E.c(),E.m(u,null)))},i(r){if(!S){T(p.$$.fragment,r);for(let c=0;c<U.length;c+=1)T(i[c]);S=!0}},o(r){V(p.$$.fragment,r),i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)V(i[c]);S=!1},d(r){r&&m(e),Z(p),Pe(i,r),P.d(),E.d()}}}function Te(a){let e,s;return e=new me({props:{message:"暫無內容"}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,l){Y(e,t,l),s=!0},p:Q,i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function je(a){let e,s;return e=new me({props:{message:"載入中..."}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,l){Y(e,t,l),s=!0},p:Q,i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function _e(a){let e,s;return e=new we({props:{post:a[11],selectedTag:a[5]}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,l){Y(e,t,l),s=!0},p(t,l){const o={};l&8&&(o.post=t[11]),l&32&&(o.selectedTag=t[5]),e.$set(o)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function De(a){let e,s,t;return{c(){e=b("a"),s=j("上一頁"),this.h()},l(l){e=v(l,"A",{"data-sveltekit-reload":!0,href:!0,class:!0});var o=C(e);s=D(o,"上一頁"),o.forEach(m),this.h()},h(){_(e,"data-sveltekit-reload",""),_(e,"href",t=`/posts/${a[5]?`tag/${encodeURIComponent(a[5])}`:""}${a[0]-1}`),_(e,"class","text-blue-500 font-bold")},m(l,o){q(l,e,o),f(e,s)},p(l,o){o&33&&t!==(t=`/posts/${l[5]?`tag/${encodeURIComponent(l[5])}`:""}${l[0]-1}`)&&_(e,"href",t)},d(l){l&&m(e)}}}function Ve(a){let e,s="上一頁";return{c(){e=b("p"),e.textContent=s,this.h()},l(t){e=v(t,"P",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-19vgmjs"&&(e.textContent=s),this.h()},h(){_(e,"class","text-gray-400")},m(t,l){q(t,e,l)},p:Q,d(t){t&&m(e)}}}function Re(a){let e,s,t;return{c(){e=b("a"),s=j("下一頁"),this.h()},l(l){e=v(l,"A",{"data-sveltekit-reload":!0,href:!0,class:!0});var o=C(e);s=D(o,"下一頁"),o.forEach(m),this.h()},h(){_(e,"data-sveltekit-reload",""),_(e,"href",t=`/posts/${a[5]?`tag/${encodeURIComponent(a[5])}/`:""}${a[0]+1}`),_(e,"class","text-blue-500 font-bold")},m(l,o){q(l,e,o),f(e,s)},p(l,o){o&33&&t!==(t=`/posts/${l[5]?`tag/${encodeURIComponent(l[5])}/`:""}${l[0]+1}`)&&_(e,"href",t)},d(l){l&&m(e)}}}function Se(a){let e,s="下一頁";return{c(){e=b("p"),e.textContent=s,this.h()},l(t){e=v(t,"P",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1fa0y9v"&&(e.textContent=s),this.h()},h(){_(e,"class","text-gray-400")},m(t,l){q(t,e,l)},p:Q,d(t){t&&m(e)}}}function Ue(a){let e,s,t,l;const o=[je,Te,Ie],d=[];function $(n,h){return n[4]?0:n[2].length===0?1:2}return e=$(a),s=d[e]=o[e](a),{c(){s.c(),t=ie()},l(n){s.l(n),t=ie()},m(n,h){d[e].m(n,h),q(n,t,h),l=!0},p(n,[h]){let p=e;e=$(n),e===p?d[e].p(n,h):(de(),V(d[p],1,1,()=>{d[p]=null}),ge(),s=d[e],s?s.p(n,h):(s=d[e]=o[e](n),s.c()),T(s,1),s.m(t.parentNode,t))},i(n){l||(T(s),l=!0)},o(n){V(s),l=!1},d(n){n&&m(t),d[e].d(n)}}}function Ae(a,e,s){let t,l,{tag:o}=e,{page:d}=e,$=[],n=[],h=!0,p=null,I=1,y=1;ve(async()=>{window.scrollTo(0,0),s(2,$=await Ce()),s(5,p=o||null),s(0,I=(d?parseInt(d):1)??1),F(),s(4,h=!1)});function F(){const u=p?$.filter(O=>O.tags.includes(p)):$;s(1,y=Math.ceil(u.length/re));const R=(I-1)*re,k=R+re;s(3,n=u.slice(R,k))}return a.$$set=u=>{"tag"in u&&s(8,o=u.tag),"page"in u&&s(9,d=u.page)},a.$$.update=()=>{a.$$.dirty&1&&s(7,t=I<=1),a.$$.dirty&3&&s(6,l=I>=y)},[I,y,$,n,h,p,l,t,o,d]}class Be extends ke{constructor(e){super(),$e(this,e,Ae,Ue,be,{tag:8,page:9})}}export{Be as P};
